---
layout: post
title: MySQL索引
category: 后台组件
tags: MySQL索引
keywords: MySQL索引
---
## 索引
- 索引是一种数据结构，目的是加快查询效率，以空间换时间

## 索引类型

### 唯一索引
- 索引列中的值必须是唯一的，但是允许出现空值。
- 这种索引一般用来保证数据的唯一性，比如保存账户信息的表，每个账户的 ID 必须保证唯一，如果重复插入相同的账户 ID 时  MySQL 返回异常。

### 主键索引
- 特殊的唯一索引，但是它不允许出现空值。


### 普通索引
- 与唯一索引不同，它允许索引列中存在相同的值。

### 联合索引
- 由多个列共同组成的索引。
- 应用联合索引时需要注意最左原则，就是 where 查询条件中的字段必须与索引字段从左到右进行匹配。

### 全文索引（使用MyISAM时能使用）
- 全文索引只能在 CHAR、VARCHAR、TEXT 类型字段上使用，底层使用倒排索引实现。要注意对于大数据量的表，生成全文索引会非常消耗时间也非常消耗磁盘空间。


## 索引实现
- B+ 树实现，B+ 树比较适合用作 > 或 < 这样的范围查询，是 MySQL 中最常使用的一种索引实现。
- R-Tree 是一种用于处理多维数据的数据结构，可以对地理数据进行空间索引。不过实际业务场景中使用的比较少。
- Hash 是使用散列表来对数据进行索引，Hash 方式不像 B-Tree 那样需要多次查询才能定位到记录，因此 Hash 索引的效率高于 B-Tree，但是不支持范围查找和排序等功能。实际使用的也比较少。
- FullText 就是前面提到的全文索引，是一种记录关键字与对应文档关系的倒排索引。

## 索引失效场景
1. 列类型时字符串，查询条件未加引号
2. 未使用索引作为查询条件
3. 使用like作为查询条件，未使用最左匹配原则
4. 查询条件使用Or，且有条件未使用索引
5. 对索引列进行函数运算
6. 联合索引不使用最左匹配原则
7. 使用索引比全表扫描慢
8. 负向查询（not，not in，not like,!=,!>,!<）















 









